<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Confirmation - NeatNest</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body {
      background-color: #fdfaf5;
      font-family: 'Segoe UI', sans-serif;
    }
    .card {
      margin: 20px auto;
      max-width: 700px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .card-header {
      background-color: #0d63c0;
      color: white;
      font-weight: bold;
    }
    footer {
      background-color: #000;
      color: white;
      padding: 10px 0;
      text-align: center;
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <div class="card">
    <div class="card-header text-center">
      ✅ Payment Successful!
    </div>
    <div class="card-body">
      <h5 class="card-title">Service Summary</h5>
      <div id="cart-summary" class="mb-3"></div>

      <h5 class="card-title">Confirmed Slot</h5>
      <div id="slot-summary" class="mb-3"></div>

      <h5 class="card-title">Payment Breakdown</h5>
      <div id="payment-summary" class="mb-3"></div>

      <a href="/" class="btn btn-primary w-100 mt-3">Back to Home</a>
    </div>
  </div>

  <footer>
    NeatNest &copy; 2025 | Making Urban Cleaning Seamless
  </footer>

  <script>
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const slot = JSON.parse(localStorage.getItem('slot')) || {};
    const payment = JSON.parse(localStorage.getItem('paymentSummary')) || {};

    const cartEl = document.getElementById("cart-summary");
    const slotEl = document.getElementById("slot-summary");
    const paymentEl = document.getElementById("payment-summary");

    cartEl.innerHTML = cart.length
      ? `<ul>${cart.map(item => `<li>${item.name} - ₹${item.price}</li>`).join('')}</ul>`
      : "<p>No services selected.</p>";

    slotEl.innerHTML = Object.keys(slot).length
      ? `<p><strong>Date:</strong> ${slot.date}</p>
         <p><strong>Time:</strong> ${slot.time}</p>
         <p><strong>Location:</strong> ${slot.location}</p>`
      : "<p>No slot information available.</p>";

    paymentEl.innerHTML = payment.itemTotal !== undefined
      ? `<p>Item Total: ₹${payment.itemTotal}</p>
         <p>Taxes & Fees: ₹${payment.taxes}</p>
         <p>Advance Paid: ₹${payment.advance}</p>
         <p>Post-Service Payment: ₹${payment.postPay}</p>
         <p>Tip: ₹${payment.tip}</p>
         <hr>
         <p><strong>Total Paid Now: ₹${payment.finalPay}</strong></p>`
      : "<p>No payment data found.</p>";

    // Clear cart after showing confirmation
    localStorage.removeItem('cart');
    localStorage.removeItem('paymentSummary');
  </script>
</body>
</html>
